{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/globals.ts"],"sourcesContent":["// @ts-ignore\nprocess.turbopack = {}\n"],"names":["process","turbopack"],"mappings":"AAAA,aAAa;AACbA,QAAQC,SAAS,GAAG,CAAC"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/compiled/stacktrace-parser/index.js"],"sourcesContent":["if (typeof __nccwpck_require__ !== \"undefined\")\n  __nccwpck_require__.ab = __dirname + \"/\";\n\nvar n = \"<unknown>\";\nexport function parse(e) {\n  var r = e.split(\"\\n\");\n  return r.reduce(function (e, r) {\n    var n =\n      parseChrome(r) ||\n      parseWinjs(r) ||\n      parseGecko(r) ||\n      parseNode(r) ||\n      parseJSC(r);\n    if (n) {\n      e.push(n);\n    }\n    return e;\n  }, []);\n}\nvar a =\n  /^\\s*at (.*?) ?\\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\/|[a-z]:\\\\|\\\\\\\\).*?)(?::(\\d+))?(?::(\\d+))?\\)?\\s*$/i;\nvar l = /\\((\\S*)(?::(\\d+))(?::(\\d+))\\)/;\nfunction parseChrome(e) {\n  var r = a.exec(e);\n  if (!r) {\n    return null;\n  }\n  var u = r[2] && r[2].indexOf(\"native\") === 0;\n  var t = r[2] && r[2].indexOf(\"eval\") === 0;\n  var i = l.exec(r[2]);\n  if (t && i != null) {\n    r[2] = i[1];\n    r[3] = i[2];\n    r[4] = i[3];\n  }\n  return {\n    file: !u ? r[2] : null,\n    methodName: r[1] || n,\n    arguments: u ? [r[2]] : [],\n    lineNumber: r[3] ? +r[3] : null,\n    column: r[4] ? +r[4] : null,\n  };\n}\nvar u =\n  /^\\s*at (?:((?:\\[object object\\])?.+) )?\\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseWinjs(e) {\n  var r = u.exec(e);\n  if (!r) {\n    return null;\n  }\n  return {\n    file: r[2],\n    methodName: r[1] || n,\n    arguments: [],\n    lineNumber: +r[3],\n    column: r[4] ? +r[4] : null,\n  };\n}\nvar t =\n  /^\\s*(.*?)(?:\\((.*?)\\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\\[native).*?|[^@]*bundle)(?::(\\d+))?(?::(\\d+))?\\s*$/i;\nvar i = /(\\S+) line (\\d+)(?: > eval line \\d+)* > eval/i;\nfunction parseGecko(e) {\n  var r = t.exec(e);\n  if (!r) {\n    return null;\n  }\n  var a = r[3] && r[3].indexOf(\" > eval\") > -1;\n  var l = i.exec(r[3]);\n  if (a && l != null) {\n    r[3] = l[1];\n    r[4] = l[2];\n    r[5] = null;\n  }\n  return {\n    file: r[3],\n    methodName: r[1] || n,\n    arguments: r[2] ? r[2].split(\",\") : [],\n    lineNumber: r[4] ? +r[4] : null,\n    column: r[5] ? +r[5] : null,\n  };\n}\nvar s = /^\\s*(?:([^@]*)(?:\\((.*?)\\))?@)?(\\S.*?):(\\d+)(?::(\\d+))?\\s*$/i;\nfunction parseJSC(e) {\n  var r = s.exec(e);\n  if (!r) {\n    return null;\n  }\n  return {\n    file: r[3],\n    methodName: r[1] || n,\n    arguments: [],\n    lineNumber: +r[4],\n    column: r[5] ? +r[5] : null,\n  };\n}\nvar o =\n  /^\\s*at (?:((?:\\[object object\\])?[^\\\\/]+(?: \\[as \\S+\\])?) )?\\(?(.*?):(\\d+)(?::(\\d+))?\\)?\\s*$/i;\nfunction parseNode(e) {\n  var r = o.exec(e);\n  if (!r) {\n    return null;\n  }\n  return {\n    file: r[2],\n    methodName: r[1] || n,\n    arguments: [],\n    lineNumber: +r[3],\n    column: r[4] ? +r[4] : null,\n  };\n}\n"],"names":["__nccwpck_require__","ab","n","parse","e","r","split","reduce","parseChrome","parseWinjs","parseGecko","parseNode","parseJSC","push","a","l","exec","u","indexOf","t","i","file","methodName","arguments","lineNumber","column","s","o"],"mappings":"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"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/ipc/error.ts"],"sourcesContent":["// merged from next.js\n// https://github.com/vercel/next.js/blob/e657741b9908cf0044aaef959c0c4defb19ed6d8/packages/next/src/lib/is-error.ts\n// https://github.com/vercel/next.js/blob/e657741b9908cf0044aaef959c0c4defb19ed6d8/packages/next/src/shared/lib/is-plain-object.ts\n\nexport default function isError(err: unknown): err is Error {\n  return (\n    typeof err === 'object' && err !== null && 'name' in err && 'message' in err\n  )\n}\n\nexport function getProperError(err: unknown): Error {\n  if (isError(err)) {\n    return err\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    // Provide a better error message for cases where `throw undefined`\n    // is called in development\n    if (typeof err === 'undefined') {\n      return new Error('`undefined` was thrown instead of a real error')\n    }\n\n    if (err === null) {\n      return new Error('`null` was thrown instead of a real error')\n    }\n  }\n\n  return new Error(isPlainObject(err) ? JSON.stringify(err) : err + '')\n}\n\nfunction getObjectClassLabel(value: any): string {\n  return Object.prototype.toString.call(value)\n}\n\nfunction isPlainObject(value: any): boolean {\n  if (getObjectClassLabel(value) !== '[object Object]') {\n    return false\n  }\n\n  const prototype = Object.getPrototypeOf(value)\n\n  /**\n   * this used to be previously:\n   *\n   * `return prototype === null || prototype === Object.prototype`\n   *\n   * but Edge Runtime expose Object from vm, being that kind of type-checking wrongly fail.\n   *\n   * It was changed to the current implementation since it's resilient to serialization.\n   */\n  return prototype === null || prototype.hasOwnProperty('isPrototypeOf')\n}\n"],"names":["isError","err","getProperError","Error","isPlainObject","JSON","stringify","getObjectClassLabel","value","Object","prototype","toString","call","getPrototypeOf","hasOwnProperty"],"mappings":"AAAA,sBAAsB;AACtB,oHAAoH;AACpH,kIAAkI;;;;;;;AAEnH,SAASA,QAAQC,GAAY;IAC1C,OACE,OAAOA,QAAQ,YAAYA,QAAQ,QAAQ,UAAUA,OAAO,aAAaA;AAE7E;AAEO,SAASC,eAAeD,GAAY;IACzC,IAAID,QAAQC,MAAM;QAChB,OAAOA;IACT;IAEA,wCAA4C;QAC1C,mEAAmE;QACnE,2BAA2B;QAC3B,IAAI,OAAOA,QAAQ,aAAa;YAC9B,OAAO,IAAIE,MAAM;QACnB;QAEA,IAAIF,QAAQ,MAAM;YAChB,OAAO,IAAIE,MAAM;QACnB;IACF;IAEA,OAAO,IAAIA,MAAMC,cAAcH,OAAOI,KAAKC,SAAS,CAACL,OAAOA,MAAM;AACpE;AAEA,SAASM,oBAAoBC,KAAU;IACrC,OAAOC,OAAOC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ;AACxC;AAEA,SAASJ,cAAcI,KAAU;IAC/B,IAAID,oBAAoBC,WAAW,mBAAmB;QACpD,OAAO;IACT;IAEA,MAAME,YAAYD,OAAOI,cAAc,CAACL;IAExC;;;;;;;;GAQC,GACD,OAAOE,cAAc,QAAQA,UAAUI,cAAc,CAAC;AACxD"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/ipc/index.ts"],"sourcesContent":["import { createConnection } from 'node:net'\nimport { Writable } from 'node:stream'\nimport type { StackFrame } from '../compiled/stacktrace-parser'\nimport { parse as parseStackTrace } from '../compiled/stacktrace-parser'\nimport { getProperError } from './error'\n\nexport type StructuredError = {\n  name: string\n  message: string\n  stack: StackFrame[]\n  cause: StructuredError | undefined\n}\n\nexport function structuredError(e: unknown): StructuredError {\n  e = getProperError(e)\n\n  return {\n    name: e.name,\n    message: e.message,\n    stack: typeof e.stack === 'string' ? parseStackTrace(e.stack) : [],\n    cause: e.cause ? structuredError(getProperError(e.cause)) : undefined,\n  }\n}\n\ntype State =\n  | {\n      type: 'waiting'\n    }\n  | {\n      type: 'packet'\n      length: number\n    }\n\nexport type Ipc<TIncoming, TOutgoing> = {\n  recv(): Promise<TIncoming>\n  send(message: TOutgoing): Promise<void>\n  sendError(error: Error | string): Promise<never>\n  sendReady(): Promise<void>\n}\n\nfunction createIpc<TIncoming, TOutgoing>(\n  port: number\n): Ipc<TIncoming, TOutgoing> {\n  const socket = createConnection({\n    port,\n    host: '127.0.0.1',\n  })\n\n  /**\n   * A writable stream that writes to the socket.\n   * We don't write directly to the socket because we need to\n   * handle backpressure and wait for the socket to be drained\n   * before writing more data.\n   */\n  const socketWritable = new Writable({\n    write(chunk, _enc, cb) {\n      if (socket.write(chunk)) {\n        cb()\n      } else {\n        socket.once('drain', cb)\n      }\n    },\n    final(cb) {\n      socket.end(cb)\n    },\n  })\n\n  const packetQueue: Buffer[] = []\n  const recvPromiseResolveQueue: Array<(message: TIncoming) => void> = []\n\n  function pushPacket(packet: Buffer) {\n    const recvPromiseResolve = recvPromiseResolveQueue.shift()\n    if (recvPromiseResolve != null) {\n      recvPromiseResolve(JSON.parse(packet.toString('utf8')) as TIncoming)\n    } else {\n      packetQueue.push(packet)\n    }\n  }\n\n  let state: State = { type: 'waiting' }\n  let buffer: Buffer = Buffer.alloc(0)\n  socket.once('connect', () => {\n    socket.setNoDelay(true)\n    socket.on('data', (chunk) => {\n      buffer = Buffer.concat([buffer, chunk])\n\n      loop: while (true) {\n        switch (state.type) {\n          case 'waiting': {\n            if (buffer.length >= 4) {\n              const length = buffer.readUInt32BE(0)\n              buffer = buffer.subarray(4)\n              state = { type: 'packet', length }\n            } else {\n              break loop\n            }\n            break\n          }\n          case 'packet': {\n            if (buffer.length >= state.length) {\n              const packet = buffer.subarray(0, state.length)\n              buffer = buffer.subarray(state.length)\n              state = { type: 'waiting' }\n              pushPacket(packet)\n            } else {\n              break loop\n            }\n            break\n          }\n          default:\n            invariant(state, (state) => `Unknown state type: ${state?.type}`)\n        }\n      }\n    })\n  })\n  // When the socket is closed, this process is no longer needed.\n  // This might happen e. g. when parent process is killed or\n  // node.js pool is garbage collected.\n  socket.once('close', () => {\n    process.exit(0)\n  })\n\n  // TODO(lukesandberg): some of the messages being sent are very large and contain lots\n  //  of redundant information.  Consider adding gzip compression to our stream.\n  function doSend(message: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      // Reserve 4 bytes for our length prefix, we will over-write after encoding.\n      const packet = Buffer.from('0000' + message, 'utf8')\n      packet.writeUInt32BE(packet.length - 4, 0)\n      socketWritable.write(packet, (err) => {\n        process.stderr.write(`TURBOPACK_OUTPUT_D\\n`)\n        process.stdout.write(`TURBOPACK_OUTPUT_D\\n`)\n        if (err != null) {\n          reject(err)\n        } else {\n          resolve()\n        }\n      })\n    })\n  }\n\n  function send(message: any): Promise<void> {\n    return doSend(JSON.stringify(message))\n  }\n  function sendReady(): Promise<void> {\n    return doSend('')\n  }\n\n  return {\n    async recv() {\n      const packet = packetQueue.shift()\n      if (packet != null) {\n        return JSON.parse(packet.toString('utf8')) as TIncoming\n      }\n\n      const result = await new Promise<TIncoming>((resolve) => {\n        recvPromiseResolveQueue.push((result) => {\n          resolve(result)\n        })\n      })\n\n      return result\n    },\n\n    send(message: TOutgoing) {\n      return send(message)\n    },\n\n    sendReady,\n\n    async sendError(error: Error): Promise<never> {\n      let failed = false\n      try {\n        await send({\n          type: 'error',\n          ...structuredError(error),\n        })\n      } catch (err) {\n        // There's nothing we can do about errors that happen after this point, we can't tell anyone\n        // about them.\n        console.error('failed to send error back to rust:', err)\n        failed = true\n      }\n      await new Promise<void>((res) => socket.end(() => res()))\n      process.exit(failed ? 1 : 0)\n    },\n  }\n}\n\nconst PORT = process.argv[2]\n\nexport const IPC = createIpc<unknown, unknown>(parseInt(PORT, 10))\n\nprocess.on('uncaughtException', (err) => {\n  IPC.sendError(err)\n})\n\nconst improveConsole = (name: string, stream: string, addStack: boolean) => {\n  // @ts-ignore\n  const original = console[name]\n  // @ts-ignore\n  const stdio = process[stream]\n  // @ts-ignore\n  console[name] = (...args: any[]) => {\n    stdio.write(`TURBOPACK_OUTPUT_B\\n`)\n    original(...args)\n    if (addStack) {\n      const stack = new Error().stack?.replace(/^.+\\n.+\\n/, '') + '\\n'\n      stdio.write('TURBOPACK_OUTPUT_S\\n')\n      stdio.write(stack)\n    }\n    stdio.write('TURBOPACK_OUTPUT_E\\n')\n  }\n}\n\nimproveConsole('error', 'stderr', true)\nimproveConsole('warn', 'stderr', true)\nimproveConsole('count', 'stdout', true)\nimproveConsole('trace', 'stderr', false)\nimproveConsole('log', 'stdout', true)\nimproveConsole('group', 'stdout', true)\nimproveConsole('groupCollapsed', 'stdout', true)\nimproveConsole('table', 'stdout', true)\nimproveConsole('debug', 'stdout', true)\nimproveConsole('info', 'stdout', true)\nimproveConsole('dir', 'stdout', true)\nimproveConsole('dirxml', 'stdout', true)\nimproveConsole('timeEnd', 'stdout', true)\nimproveConsole('timeLog', 'stdout', true)\nimproveConsole('timeStamp', 'stdout', true)\nimproveConsole('assert', 'stderr', true)\n\n/**\n * Utility function to ensure all variants of an enum are handled.\n */\nfunction invariant(never: never, computeMessage: (arg: any) => string): never {\n  throw new Error(`Invariant: ${computeMessage(never)}`)\n}\n"],"names":["structuredError","e","name","message","stack","cause","undefined","createIpc","port","socket","host","socketWritable","write","chunk","_enc","cb","once","final","end","packetQueue","recvPromiseResolveQueue","pushPacket","packet","recvPromiseResolve","shift","JSON","parse","toString","push","state","type","buffer","Buffer","alloc","setNoDelay","on","concat","loop","length","readUInt32BE","subarray","invariant","process","exit","doSend","Promise","resolve","reject","from","writeUInt32BE","err","stderr","stdout","send","stringify","sendReady","recv","result","sendError","error","failed","console","res","PORT","argv","IPC","parseInt","improveConsole","stream","addStack","original","stdio","args","Error","replace","never","computeMessage"],"mappings":"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"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/ipc/evaluate.ts"],"sourcesContent":["import { IPC } from './index'\nimport type { Ipc as GenericIpc } from './index'\n\ntype IpcIncomingMessage =\n  | {\n      type: 'evaluate'\n      args: string[]\n    }\n  | {\n      type: 'result'\n      id: number\n      error: string | null\n      data: any | null\n    }\n\ntype IpcOutgoingMessage =\n  | {\n      type: 'end'\n      data: string | undefined\n      duration: number\n    }\n  | {\n      type: 'info'\n      data: any\n    }\n  | {\n      type: 'request'\n      id: number\n      data: any\n    }\n\nexport type Ipc<IM, RM> = {\n  sendInfo(message: IM): Promise<void>\n  sendRequest(message: RM): Promise<unknown>\n  sendError(error: Error): Promise<never>\n}\nconst ipc = IPC as GenericIpc<IpcIncomingMessage, IpcOutgoingMessage>\n\nconst queue: string[][] = []\n\nexport const run = async (\n  moduleFactory: () => Promise<{\n    init?: () => Promise<void>\n    default: (ipc: Ipc<any, any>, ...deserializedArgs: any[]) => any\n  }>\n) => {\n  let nextId = 1\n  const requests = new Map()\n  const internalIpc = {\n    sendInfo: (message: any) =>\n      ipc.send({\n        type: 'info',\n        data: message,\n      }),\n    sendRequest: (message: any) => {\n      const id = nextId++\n      let resolve, reject\n      const promise = new Promise((res, rej) => {\n        resolve = res\n        reject = rej\n      })\n      requests.set(id, { resolve, reject })\n      return ipc\n        .send({ type: 'request', id, data: message })\n        .then(() => promise)\n    },\n    sendError: (error: Error) => {\n      return ipc.sendError(error)\n    },\n  }\n\n  // Initialize module and send ready message\n  let getValue: (ipc: Ipc<any, any>, ...deserializedArgs: any[]) => any\n  try {\n    const module = await moduleFactory()\n    if (typeof module.init === 'function') {\n      await module.init()\n    }\n    getValue = module.default\n    await ipc.sendReady()\n  } catch (err) {\n    await ipc.sendReady()\n    await ipc.sendError(err as Error)\n  }\n\n  // Queue handling\n  let isRunning = false\n  const run = async () => {\n    while (queue.length > 0) {\n      const args = queue.shift()!\n      try {\n        const value = await getValue(internalIpc, ...args)\n        await ipc.send({\n          type: 'end',\n          data:\n            value === undefined ? undefined : JSON.stringify(value, null, 2),\n          duration: 0,\n        })\n      } catch (e) {\n        await ipc.sendError(e as Error)\n      }\n    }\n    isRunning = false\n  }\n\n  // Communication handling\n  while (true) {\n    const msg = await ipc.recv()\n\n    switch (msg.type) {\n      case 'evaluate': {\n        queue.push(msg.args)\n        if (!isRunning) {\n          isRunning = true\n          run()\n        }\n        break\n      }\n      case 'result': {\n        const request = requests.get(msg.id)\n        if (request) {\n          requests.delete(msg.id)\n          if (msg.error) {\n            request.reject(new Error(msg.error))\n          } else {\n            request.resolve(msg.data)\n          }\n        }\n        break\n      }\n      default: {\n        console.error('unexpected message type', (msg as any).type)\n        process.exit(1)\n      }\n    }\n  }\n}\n\nexport type { IpcIncomingMessage, IpcOutgoingMessage }\n"],"names":["ipc","queue","run","moduleFactory","nextId","requests","Map","internalIpc","sendInfo","message","send","type","data","sendRequest","id","resolve","reject","promise","Promise","res","rej","set","then","sendError","error","getValue","module","init","default","sendReady","err","isRunning","length","args","shift","value","undefined","JSON","stringify","duration","e","msg","recv","push","request","get","delete","Error","console","process","exit"],"mappings":";;;;AAAA;;AAoCA,MAAMA,MAAM,0HAAG;AAEf,MAAMC,QAAoB,EAAE;AAErB,MAAMC,MAAM,OACjBC;IAKA,IAAIC,SAAS;IACb,MAAMC,WAAW,IAAIC;IACrB,MAAMC,cAAc;QAClBC,UAAU,CAACC,UACTT,IAAIU,IAAI,CAAC;gBACPC,MAAM;gBACNC,MAAMH;YACR;QACFI,aAAa,CAACJ;YACZ,MAAMK,KAAKV;YACX,IAAIW,SAASC;YACb,MAAMC,UAAU,IAAIC,QAAQ,CAACC,KAAKC;gBAChCL,UAAUI;gBACVH,SAASI;YACX;YACAf,SAASgB,GAAG,CAACP,IAAI;gBAAEC;gBAASC;YAAO;YACnC,OAAOhB,IACJU,IAAI,CAAC;gBAAEC,MAAM;gBAAWG;gBAAIF,MAAMH;YAAQ,GAC1Ca,IAAI,CAAC,IAAML;QAChB;QACAM,WAAW,CAACC;YACV,OAAOxB,IAAIuB,SAAS,CAACC;QACvB;IACF;IAEA,2CAA2C;IAC3C,IAAIC;IACJ,IAAI;QACF,MAAMC,SAAS,MAAMvB;QACrB,IAAI,OAAOuB,OAAOC,IAAI,KAAK,YAAY;YACrC,MAAMD,OAAOC,IAAI;QACnB;QACAF,WAAWC,OAAOE,OAAO;QACzB,MAAM5B,IAAI6B,SAAS;IACrB,EAAE,OAAOC,KAAK;QACZ,MAAM9B,IAAI6B,SAAS;QACnB,MAAM7B,IAAIuB,SAAS,CAACO;IACtB;IAEA,iBAAiB;IACjB,IAAIC,YAAY;IAChB,MAAM7B,MAAM;QACV,MAAOD,MAAM+B,MAAM,GAAG,EAAG;YACvB,MAAMC,OAAOhC,MAAMiC,KAAK;YACxB,IAAI;gBACF,MAAMC,QAAQ,MAAMV,SAASlB,gBAAgB0B;gBAC7C,MAAMjC,IAAIU,IAAI,CAAC;oBACbC,MAAM;oBACNC,MACEuB,UAAUC,YAAYA,YAAYC,KAAKC,SAAS,CAACH,OAAO,MAAM;oBAChEI,UAAU;gBACZ;YACF,EAAE,OAAOC,GAAG;gBACV,MAAMxC,IAAIuB,SAAS,CAACiB;YACtB;QACF;QACAT,YAAY;IACd;IAEA,yBAAyB;IACzB,MAAO,KAAM;QACX,MAAMU,MAAM,MAAMzC,IAAI0C,IAAI;QAE1B,OAAQD,IAAI9B,IAAI;YACd,KAAK;gBAAY;oBACfV,MAAM0C,IAAI,CAACF,IAAIR,IAAI;oBACnB,IAAI,CAACF,WAAW;wBACdA,YAAY;wBACZ7B;oBACF;oBACA;gBACF;YACA,KAAK;gBAAU;oBACb,MAAM0C,UAAUvC,SAASwC,GAAG,CAACJ,IAAI3B,EAAE;oBACnC,IAAI8B,SAAS;wBACXvC,SAASyC,MAAM,CAACL,IAAI3B,EAAE;wBACtB,IAAI2B,IAAIjB,KAAK,EAAE;4BACboB,QAAQ5B,MAAM,CAAC,IAAI+B,MAAMN,IAAIjB,KAAK;wBACpC,OAAO;4BACLoB,QAAQ7B,OAAO,CAAC0B,IAAI7B,IAAI;wBAC1B;oBACF;oBACA;gBACF;YACA;gBAAS;oBACPoC,QAAQxB,KAAK,CAAC,2BAA2B,AAACiB,IAAY9B,IAAI;oBAC1DsC,QAAQC,IAAI,CAAC;gBACf;QACF;IACF;AACF"}},
    {"offset": {"line": 500, "column": 0}, "map": {"version":3,"sources":["turbopack:///[turbopack-node]/ipc/evaluate.ts/evaluate.js"],"sourcesContent":["import { run } from 'RUNTIME'; run(() => import('INNER'))"],"names":[],"mappings":";AAAA;;AAA+B,IAAA,6HAAG,EAAC"}}]
}