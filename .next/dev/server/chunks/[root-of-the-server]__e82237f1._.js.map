{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///D:/AconnectJP/lib/db.ts"],"sourcesContent":["import mysql from 'mysql2/promise';\r\n\r\nconst pool = mysql.createPool(process.env.DATABASE_URL!);\r\n\r\nexport default pool;\r\n"],"names":["pool","createPool","process","env","DATABASE_URL"],"mappings":";;;;AAAA;;AAEA,MAAMA,OAAO,8IAAK,CAACC,UAAU,CAACC,QAAQC,GAAG,CAACC,YAAY;uCAEvCJ"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///D:/AconnectJP/lib/auth.ts"],"sourcesContent":["import { NextAuthOptions } from \"next-auth\";\r\nimport CredentialsProvider from \"next-auth/providers/credentials\";\r\nimport db from \"@/lib/db\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nexport const authOptions: NextAuthOptions = {\r\n    providers: [\r\n        CredentialsProvider({\r\n            id: \"alumni\",\r\n            name: \"Alumni Login\",\r\n            credentials: {\r\n                student_number: { label: \"Student Number\", type: \"text\" },\r\n                password: { label: \"Password\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.student_number || !credentials?.password) return null;\r\n\r\n                const [rows]: any = await db.query(\r\n                    \"SELECT * FROM alumni WHERE student_number = ?\",\r\n                    [credentials.student_number]\r\n                );\r\n\r\n                const user = rows[0];\r\n\r\n                if (!user) {\r\n                    throw new Error(\"Unregistered Student Number\");\r\n                }\r\n\r\n                const isValid = await bcrypt.compare(credentials.password, user.password);\r\n                if (!isValid) {\r\n                    throw new Error(\"Invalid Password\");\r\n                }\r\n\r\n                return {\r\n                    id: user.id.toString(),\r\n                    name: `${user.first_name} ${user.last_name}`,\r\n                    email: user.email,\r\n                    role: \"alumni\",\r\n                    student_number: user.student_number\r\n                };\r\n            }\r\n        }),\r\n        CredentialsProvider({\r\n            id: \"admin\",\r\n            name: \"Admin Login\",\r\n            credentials: {\r\n                username: { label: \"Username\", type: \"text\" },\r\n                password: { label: \"Password\", type: \"password\" }\r\n            },\r\n            async authorize(credentials) {\r\n                if (!credentials?.username || !credentials?.password) return null;\r\n\r\n                const [rows]: any = await db.query(\r\n                    \"SELECT * FROM admin_users WHERE username = ?\",\r\n                    [credentials.username]\r\n                );\r\n\r\n                const user = rows[0];\r\n\r\n                if (!user) {\r\n                    throw new Error(\"Unregistered Admin Username\");\r\n                }\r\n\r\n                const isValid = await bcrypt.compare(credentials.password, user.password);\r\n                if (!isValid) {\r\n                    throw new Error(\"Invalid Password\");\r\n                }\r\n\r\n                return {\r\n                    id: user.id.toString(),\r\n                    name: `${user.first_name} ${user.last_name}`,\r\n                    email: user.email,\r\n                    role: \"administrator\"\r\n                };\r\n            }\r\n        })\r\n    ],\r\n    callbacks: {\r\n        async jwt({ token, user }) {\r\n            if (user) {\r\n                token.id = user.id;\r\n                token.role = (user as any).role;\r\n                token.student_number = (user as any).student_number;\r\n            }\r\n            return token;\r\n        },\r\n        async session({ session, token }) {\r\n            if (session.user) {\r\n                (session.user as any).id = token.id;\r\n                (session.user as any).role = token.role;\r\n                (session.user as any).student_number = token.student_number;\r\n            }\r\n            return session;\r\n        }\r\n    },\r\n    pages: {\r\n        signIn: \"/login\",\r\n    },\r\n    secret: process.env.NEXTAUTH_SECRET,\r\n};\r\n"],"names":["authOptions","providers","id","name","credentials","student_number","label","type","password","authorize","rows","query","user","Error","isValid","compare","toString","first_name","last_name","email","role","username","callbacks","jwt","token","session","pages","signIn","secret","process","env","NEXTAUTH_SECRET"],"mappings":";;;;AACA;AACA;AACA;;;;AAEO,MAAMA,cAA+B;IACxCC,WAAW;QACP,IAAA,qKAAmB,EAAC;YAChBC,IAAI;YACJC,MAAM;YACNC,aAAa;gBACTC,gBAAgB;oBAAEC,OAAO;oBAAkBC,MAAM;gBAAO;gBACxDC,UAAU;oBAAEF,OAAO;oBAAYC,MAAM;gBAAW;YACpD;YACA,MAAME,WAAUL,WAAW;gBACvB,IAAI,CAACA,aAAaC,kBAAkB,CAACD,aAAaI,UAAU,OAAO;gBAEnE,MAAM,CAACE,KAAK,GAAQ,MAAM,sHAAE,CAACC,KAAK,CAC9B,iDACA;oBAACP,YAAYC,cAAc;iBAAC;gBAGhC,MAAMO,OAAOF,IAAI,CAAC,EAAE;gBAEpB,IAAI,CAACE,MAAM;oBACP,MAAM,IAAIC,MAAM;gBACpB;gBAEA,MAAMC,UAAU,MAAM,8IAAM,CAACC,OAAO,CAACX,YAAYI,QAAQ,EAAEI,KAAKJ,QAAQ;gBACxE,IAAI,CAACM,SAAS;oBACV,MAAM,IAAID,MAAM;gBACpB;gBAEA,OAAO;oBACHX,IAAIU,KAAKV,EAAE,CAACc,QAAQ;oBACpBb,MAAM,GAAGS,KAAKK,UAAU,CAAC,CAAC,EAAEL,KAAKM,SAAS,EAAE;oBAC5CC,OAAOP,KAAKO,KAAK;oBACjBC,MAAM;oBACNf,gBAAgBO,KAAKP,cAAc;gBACvC;YACJ;QACJ;QACA,IAAA,qKAAmB,EAAC;YAChBH,IAAI;YACJC,MAAM;YACNC,aAAa;gBACTiB,UAAU;oBAAEf,OAAO;oBAAYC,MAAM;gBAAO;gBAC5CC,UAAU;oBAAEF,OAAO;oBAAYC,MAAM;gBAAW;YACpD;YACA,MAAME,WAAUL,WAAW;gBACvB,IAAI,CAACA,aAAaiB,YAAY,CAACjB,aAAaI,UAAU,OAAO;gBAE7D,MAAM,CAACE,KAAK,GAAQ,MAAM,sHAAE,CAACC,KAAK,CAC9B,gDACA;oBAACP,YAAYiB,QAAQ;iBAAC;gBAG1B,MAAMT,OAAOF,IAAI,CAAC,EAAE;gBAEpB,IAAI,CAACE,MAAM;oBACP,MAAM,IAAIC,MAAM;gBACpB;gBAEA,MAAMC,UAAU,MAAM,8IAAM,CAACC,OAAO,CAACX,YAAYI,QAAQ,EAAEI,KAAKJ,QAAQ;gBACxE,IAAI,CAACM,SAAS;oBACV,MAAM,IAAID,MAAM;gBACpB;gBAEA,OAAO;oBACHX,IAAIU,KAAKV,EAAE,CAACc,QAAQ;oBACpBb,MAAM,GAAGS,KAAKK,UAAU,CAAC,CAAC,EAAEL,KAAKM,SAAS,EAAE;oBAC5CC,OAAOP,KAAKO,KAAK;oBACjBC,MAAM;gBACV;YACJ;QACJ;KACH;IACDE,WAAW;QACP,MAAMC,KAAI,EAAEC,KAAK,EAAEZ,IAAI,EAAE;YACrB,IAAIA,MAAM;gBACNY,MAAMtB,EAAE,GAAGU,KAAKV,EAAE;gBAClBsB,MAAMJ,IAAI,GAAG,AAACR,KAAaQ,IAAI;gBAC/BI,MAAMnB,cAAc,GAAG,AAACO,KAAaP,cAAc;YACvD;YACA,OAAOmB;QACX;QACA,MAAMC,SAAQ,EAAEA,OAAO,EAAED,KAAK,EAAE;YAC5B,IAAIC,QAAQb,IAAI,EAAE;gBACba,QAAQb,IAAI,CAASV,EAAE,GAAGsB,MAAMtB,EAAE;gBAClCuB,QAAQb,IAAI,CAASQ,IAAI,GAAGI,MAAMJ,IAAI;gBACtCK,QAAQb,IAAI,CAASP,cAAc,GAAGmB,MAAMnB,cAAc;YAC/D;YACA,OAAOoB;QACX;IACJ;IACAC,OAAO;QACHC,QAAQ;IACZ;IACAC,QAAQC,QAAQC,GAAG,CAACC,eAAe;AACvC"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///D:/AconnectJP/app/api/auth/%5B...nextauth%5D/route.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\r\nimport { authOptions } from \"@/lib/auth\";\r\n\r\nconst handler = NextAuth(authOptions);\r\n\r\nexport { handler as GET, handler as POST };\r\n"],"names":["handler"],"mappings":";;;;;;AAAA;AACA;;;AAEA,MAAMA,UAAU,IAAA,kJAAQ,EAAC,4HAAW"}}]
}