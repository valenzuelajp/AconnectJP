{"version":3,"sources":["../../../../src/server/dev/server-action-logger.ts"],"sourcesContent":["import { configure } from 'next/dist/compiled/safe-stable-stringify'\n\n// Configure stringify with reasonable limits for action logging\nconst stringify = configure({\n  maximumDepth: 2,\n  maximumBreadth: 3,\n})\n\n/**\n * Format a single argument for display in server action logs.\n */\nfunction formatArg(arg: unknown): string {\n  try {\n    return stringify(arg) ?? String(arg)\n  } catch {\n    // String(arg) can throw for temporary client references (e.g., class instances\n    // passed from client to server) because accessing .toString() on them throws\n    // \"Cannot access toString on the server\"\n    try {\n      return String(arg)\n    } catch {\n      return '[unserializable]'\n    }\n  }\n}\n\n/**\n * Format arguments array to a string for display\n */\nexport function formatArgs(args: unknown[]): string {\n  return args.map((a) => formatArg(a)).join(', ')\n}\n\nexport interface ServerActionLogInfo {\n  functionName: string\n  args: unknown[]\n  location: string\n}\n"],"names":["configure","stringify","maximumDepth","maximumBreadth","formatArg","arg","String","formatArgs","args","map","a","join"],"mappings":"AAAA,SAASA,SAAS,QAAQ,2CAA0C;AAEpE,gEAAgE;AAChE,MAAMC,YAAYD,UAAU;IAC1BE,cAAc;IACdC,gBAAgB;AAClB;AAEA;;CAEC,GACD,SAASC,UAAUC,GAAY;IAC7B,IAAI;QACF,OAAOJ,UAAUI,QAAQC,OAAOD;IAClC,EAAE,OAAM;QACN,+EAA+E;QAC/E,6EAA6E;QAC7E,yCAAyC;QACzC,IAAI;YACF,OAAOC,OAAOD;QAChB,EAAE,OAAM;YACN,OAAO;QACT;IACF;AACF;AAEA;;CAEC,GACD,OAAO,SAASE,WAAWC,IAAe;IACxC,OAAOA,KAAKC,GAAG,CAAC,CAACC,IAAMN,UAAUM,IAAIC,IAAI,CAAC;AAC5C","ignoreList":[0]}