{"version":3,"sources":["../../../src/lib/typescript/type-paths.ts"],"sourcesContent":["import path from 'path'\n\n/**\n * Gets the glob patterns for type definition directories in tsconfig.\n * Next.js uses different distDir paths in development vs production:\n * - Development: \"{distDir}/dev\"\n * - Production: \"{distDir}\"\n */\nexport function getTypeDefinitionGlobPatterns(distDir: string): string[] {\n  const distDirPosix =\n    path.win32.sep === path.sep\n      ? distDir.replaceAll(path.win32.sep, path.posix.sep)\n      : distDir\n\n  const typeGlobPatterns: string[] = [`${distDirPosix}/types/**/*.ts`]\n\n  // Include both .next/types and .next/dev/types to avoid tsconfig churn when switching\n  // between dev/build modes\n  typeGlobPatterns.push(\n    process.env.NODE_ENV === 'development'\n      ? // In dev, distDir is \"{distDir}/dev\", so also include \"{distDir}/types\"\n        `${distDirPosix.replace(/\\/dev$/, '')}/types/**/*.ts`\n      : // In build, distDir is \"{distDir}\", so also include \"{distDir}/dev/types\"\n        `${distDirPosix}/dev/types/**/*.ts`\n  )\n  // Sort for consistent order\n  typeGlobPatterns.sort((a, b) => a.length - b.length)\n\n  return typeGlobPatterns\n}\n\n/**\n * Gets the absolute path to the dev types directory for filtering during type-checking.\n * Returns null in dev mode (where dev types are the main types).\n */\nexport function getDevTypesPath(\n  baseDir: string,\n  distDir: string\n): string | null {\n  const isDev = process.env.NODE_ENV === 'development'\n  if (isDev) {\n    // In dev mode, dev types are the main types, so no need to filter\n    return null\n  }\n\n  // In build mode, dev types are at \"{baseDir}/{distDir}/dev/types\" and should be filtered\n  return path.join(baseDir, distDir, 'dev', 'types')\n}\n"],"names":["getDevTypesPath","getTypeDefinitionGlobPatterns","distDir","distDirPosix","path","win32","sep","replaceAll","posix","typeGlobPatterns","push","process","env","NODE_ENV","replace","sort","a","b","length","baseDir","isDev","join"],"mappings":";;;;;;;;;;;;;;;IAmCgBA,eAAe;eAAfA;;IA3BAC,6BAA6B;eAA7BA;;;6DARC;;;;;;AAQV,SAASA,8BAA8BC,OAAe;IAC3D,MAAMC,eACJC,aAAI,CAACC,KAAK,CAACC,GAAG,KAAKF,aAAI,CAACE,GAAG,GACvBJ,QAAQK,UAAU,CAACH,aAAI,CAACC,KAAK,CAACC,GAAG,EAAEF,aAAI,CAACI,KAAK,CAACF,GAAG,IACjDJ;IAEN,MAAMO,mBAA6B;QAAC,GAAGN,aAAa,cAAc,CAAC;KAAC;IAEpE,sFAAsF;IACtF,0BAA0B;IAC1BM,iBAAiBC,IAAI,CACnBC,QAAQC,GAAG,CAACC,QAAQ,KAAK,gBAErB,GAAGV,aAAaW,OAAO,CAAC,UAAU,IAAI,cAAc,CAAC,GAErD,GAAGX,aAAa,kBAAkB,CAAC;IAEzC,4BAA4B;IAC5BM,iBAAiBM,IAAI,CAAC,CAACC,GAAGC,IAAMD,EAAEE,MAAM,GAAGD,EAAEC,MAAM;IAEnD,OAAOT;AACT;AAMO,SAAST,gBACdmB,OAAe,EACfjB,OAAe;IAEf,MAAMkB,QAAQT,QAAQC,GAAG,CAACC,QAAQ,KAAK;IACvC,IAAIO,OAAO;QACT,kEAAkE;QAClE,OAAO;IACT;IAEA,yFAAyF;IACzF,OAAOhB,aAAI,CAACiB,IAAI,CAACF,SAASjB,SAAS,OAAO;AAC5C","ignoreList":[0]}